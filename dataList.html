<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <link rel="stylesheet" href="css/datalist.css">
    <style type="text/css">
        .page-fenye{
            width: 1200px;
            margin: 0 auto;
            text-align: center;
        }
        .page-fenye li{
            display: inline;
        }
        .page-fenye .active a{
            background-color: #19bbff;
            color: #fff;
        }
        .page-fenye li>a{display:inline-block;padding:5px 10px;background-color:#fff;border:1px solid #ddd;border-radius:3px}
    </style>
    <script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
</head>
<body>
<div>
    <div></div>
    <table class="table table-hover data-list-table" style="width: 1200px;margin: 0 auto;">
        <thead>
        <tr>
            <td>序号</td>
            <td>查询对象</td>
            <td>创建时间</td>
            <td>查询时间</td>
            <td>查询状态</td>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>1</td>
            <td>张三</td>
            <td>2013-3-16</td>
            <td>2018-3-16</td>
            <td>待查询</td>
        </tr>
        <tr>
            <td>2</td>
            <td>张三</td>
            <td>2013-3-16</td>
            <td>2018-3-16</td>
            <td>待查询</td>
        </tr>
        <tr>
            <td>3</td>
            <td>张三</td>
            <td>2013-3-16</td>
            <td>2018-3-16</td>
            <td>待查询</td>
        </tr>
        </tbody>
    </table>

<div class="page-fenye"></div>
</div>
<script type="text/javascript">
    $(function(){
        function getPageLink(curr_page, page, page_url, tag){
            return '<li ' + (curr_page == page ? 'class="active"' : '') +'>'+
                '<a href="#" onclick="'+ page_url.replace('#page#', page) +';return false;">'+ (tag || page) +'</a></li>';
        }
        function getPagesHtml(curr_page, total_num, size, page_url, options){
            options = $.extend({
                max_page_total: 100, //最多的页数
                visible_num: 16 //翻页区域能容纳的最多格子数量，包含上一页下一页、省略号，默认为16个。
            }, options);

            // var page_total = Math.min(Math.ceil(total_num / size), options.max_page_total);
            var page_total = Math.ceil(total_num / size);
            var curr_page_no = parseInt(curr_page);
            //除去上页下页、首页尾页、前后的省略号6个格子后还能显示的格子数
            var main_num = options.visible_num - 6;

            //页数过大时减少页面上显示的总页数,以免翻页区域宽度不够
            if(curr_page_no > 1000){
                main_num -= 5;
            }else if(curr_page_no > 100){
                main_num -= 3;
            }else if(curr_page_no > 10){
                main_num -= 1;
            }

            //当前页面左边的页面数
            var left_nums = Math.floor(main_num / 2);


            //当前页面右边的页面数
            var right_nums = main_num - 1 - left_nums;

            //循环开始的页面，1、2页特殊处理，循环至少从3开始*%}
            var loop_start = curr_page_no - left_nums;
            var loop_end = curr_page_no + right_nums;

            if(loop_start < 3){
                loop_end = loop_end + (3 - loop_start);
                loop_start = 3;
            }



            //循环结束的页面,倒数1、2页特殊处理，循环至多从total-2结束*%}
            if(loop_end > page_total - 2){
                if(loop_start - (loop_end - (page_total - 2)) >= 3){
                    loop_start = loop_start - (loop_end - (page_total - 2));
                }
                loop_end = page_total - 2;
            }

            var html = '<ul>';

            if(curr_page_no > 1) {
                html += getPageLink(curr_page_no, curr_page_no - 1, page_url, '上一页');
            }

            //第1页*%}
            if(page_total > 1){
                html += getPageLink(curr_page_no, 1, page_url);
            }

            //从第3页开始循环时，直接显示第二页，否则显示...*%}
            if(page_total >= 2){
                if(loop_start === 3){
                    html += getPageLink(curr_page_no, 2, page_url);
                }else{
                    html += '<li class="disabled"><a>...</a></li>';
                }
            }
            for(var i = loop_start;i <= loop_end; i++){
                html += getPageLink(curr_page_no, i, page_url);
            }

            if(page_total >= 4){
                //循环刚好在倒数第三页结束，直接显示倒数第二页，否则显示...*%}
                if(loop_end === page_total - 2){
                    html += getPageLink(curr_page_no, page_total - 1, page_url);
                }else{
                    html += '<li class="disabled"><a>...</a></li>';
                }
            }

            if(page_total >= 3){
                //尾页*%}
                html += getPageLink(curr_page_no, page_total, page_url);
            }

            if(curr_page_no < page_total){
                html += getPageLink(curr_page_no, parseInt(curr_page_no) + 1, page_url, '下一页');
            }

            html += '</ul>';
            return html;
        }
        $('.page-fenye').append(getPagesHtml(2,30,10,'#1#'));
//        var pageHtml = IOT.getPagesHtml(page, res.data.total, 10, 'nbIotDevice.ajaxPager(#page#)');
//        $('.pager').html(pageHtml);
    })
</script>

</body>
</html>